<!-- saved from url=(0014)about:internet -->
<pre class="code">
<span class="srcline"><span class="lineno"><a href="91,188" id="srcline188">188</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="91,189" id="srcline189">189</a></span><span class="line"><span class="keyword">function</span> <span class="var type1" id="S35T73U343">R</span>=pynd(<span class="mxinfo " id="T73:U2"><span class="mxinfo " id="T73:U3"><span class="var type1" id="S35T73U346">R</span></span></span>,<span class="var type1" id="S36T68U347">H</span>,<span class="var type1" id="S37T69U348">S</span>,<span class="var type1" id="S38T1U349">alpha</span>,<span class="var type1" id="S39T1U350">beta</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="91,190" id="srcline190">190</a></span><span class="line"><span class="mxinfo " id="T73:U9"><span class="var type1" id="S40T73U353">Y1</span>=<span class="mxinfo " id="T73:U11">(<span class="mxinfo " id="T73:U12"><span class="mxinfo " id="T1:U13">1</span>+<span class="mxinfo " id="T73:U14">sign(<span class="var type1" id="S35T73U360">R</span>)</span></span>)/<span class="mxinfo " id="T1:U16">2</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="91,191" id="srcline191">191</a></span><span class="line"><span class="mxinfo " id="T73:U17"><span class="var type1" id="S40T73U364">Y1</span>=<span class="mxinfo " id="T73:U19"><span class="fcn" id="F339N9:B366">hamming_decode_simple</span>(<span class="var type1" id="S40T73U367">Y1</span>,<span class="var type1" id="S36T68U368">H</span>,<span class="var type1" id="S37T69U369">S</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="91,192" id="srcline192">192</a></span><span class="line"><span class="mxinfo " id="T1:U23"><span class="var type1" id="S43T1U372">len_Y1</span> = <span class="mxinfo " id="T1:U25">length(<span class="var type1" id="S40T73U375">Y1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="91,193" id="srcline193">193</a></span><span class="line"><span class="mxinfo " id="T1:U27"><span class="var type1" id="S45T1U378">num_competitor</span>=<span class="mxinfo " id="T1:U29">3</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="91,194" id="srcline194">194</a></span><span class="line"><span class="mxinfo " id="T56:U30"><span class="var type1" id="S46T56U382">dist</span>=<span class="mxinfo " id="T56:U32">zeros(<span class="mxinfo " id="T1:U33">1</span>,<span class="mxinfo " id="T1:U34"><span class="var type1" id="S45T1U387">num_competitor</span>+1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="91,195" id="srcline195">195</a></span><span class="line"><span class="mxinfo " id="T76:U36"><span class="var type1" id="S48T76U391">Y</span> = <span class="mxinfo " id="T76:U38">zeros(<span class="mxinfo " id="T1:U39"><span class="var type1" id="S45T1U394">num_competitor</span></span>,<span class="var type1" id="S43T1U395">len_Y1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="91,196" id="srcline196">196</a></span><span class="line"><span class="mxinfo " id="T73:U42"><span class="mxinfo " id="T73:U43"><span class="var type1" id="S48T76U399">Y</span>(1,:)</span> = <span class="var type1" id="S40T73U402">Y1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="91,197" id="srcline197">197</a></span><span class="line"><span class="keyword">if</span> <span class="var type1" id="S45T1U405">num_competitor</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,198" id="srcline198">198</a></span><span class="line">    <span class="mxinfo " id="T1:U47"><span class="mxinfo " id="T1:U48"><span class="var type1" id="S46T56U409">dist</span>(<span class="mxinfo " id="T1:U50">1</span>)</span>=<span class="mxinfo " id="T1:U51">mean(<span class="mxinfo " id="T73:U52">(<span class="mxinfo " id="T73:U53"><span class="var type1" id="S35T73U416">R</span>-(<span class="mxinfo " id="T73:U55"><span class="mxinfo " id="T73:U56"><span class="mxinfo " id="T1:U57">2</span>*<span class="var type1" id="S40T73U421">Y1</span></span>-<span class="mxinfo " id="T1:U59">1</span></span>)</span>).^2</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="91,199" id="srcline199">199</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="91,200" id="srcline200">200</a></span><span class="line">    [<span class="mxinfo " id="T1:U60"><span class="mxinfo " id="T73:U61">~</span></span>, <span class="mxinfo " id="T73:U62"><span class="var type1" id="S50T73U428">bb</span></span>]=sort(<span class="mxinfo " id="T73:U64">abs(<span class="var type1" id="S35T73U433">R</span>)</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="91,201" id="srcline201">201</a></span><span class="line">    <span class="keyword">for</span> <span class="var type1" id="S53T1U436">k</span>=<span class="mxinfo " id="T1:U67">1</span>:<span class="var type1" id="S45T1U439">num_competitor</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,202" id="srcline202">202</a></span><span class="line">        <span class="mxinfo " id="T73:U69"><span class="var type1" id="S40T73U442">Y1</span>=<span class="mxinfo " id="T73:U71"><span class="var type1" id="S48T76U444">Y</span>(<span class="mxinfo " id="T1:U73">1</span>,:)</span></span>;<span class="comment">%competitor</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,203" id="srcline203">203</a></span><span class="line">        <span class="mxinfo " id="T1:U74"><span class="var type1" id="S54T1U449">iw</span>=<span class="mxinfo " id="T1:U76"><span class="var type1" id="S50T73U451">bb</span>(<span class="var type1" id="S53T1U452">k</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="91,204" id="srcline204">204</a></span><span class="line">        <span class="mxinfo " id="T1:U79"><span class="mxinfo " id="T1:U80"><span class="var type1" id="S40T73U456">Y1</span>(<span class="var type1" id="S54T1U457">iw</span>)</span>=<span class="mxinfo " id="T1:U83"><span class="mxinfo " id="T1:U84">1</span>-<span class="mxinfo " id="T1:U85"><span class="var type1" id="S40T73U461">Y1</span>(<span class="var type1" id="S54T1U462">iw</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="91,205" id="srcline205">205</a></span><span class="line">        <span class="mxinfo " id="T73:U88"><span class="var type1" id="S40T73U465">Y1</span>=<span class="mxinfo " id="T73:U90"><span class="fcn" id="F339N9:B467">hamming_decode_simple</span>(<span class="var type1" id="S40T73U468">Y1</span>,<span class="var type1" id="S36T68U469">H</span>,<span class="var type1" id="S37T69U470">S</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="91,206" id="srcline206">206</a></span><span class="line">        <span class="mxinfo " id="T73:U94"><span class="mxinfo " id="T73:U95"><span class="var type1" id="S48T76U474">Y</span>(<span class="var type1" id="S53T1U475">k</span>,:)</span>=<span class="var type1" id="S40T73U477">Y1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="91,207" id="srcline207">207</a></span><span class="line">        <span class="mxinfo " id="T1:U99"><span class="mxinfo " id="T1:U100"><span class="var type1" id="S46T56U481">dist</span>(<span class="mxinfo " id="T1:U102"><span class="var type1" id="S53T1U483">k</span>+<span class="mxinfo " id="T1:U104">1</span></span>)</span>=<span class="mxinfo " id="T1:U105">mean(<span class="mxinfo " id="T73:U106">(<span class="mxinfo " id="T73:U107"><span class="var type1" id="S35T73U490">R</span>-(<span class="mxinfo " id="T73:U109"><span class="mxinfo " id="T73:U110"><span class="mxinfo " id="T1:U111">2</span>*<span class="var type1" id="S40T73U495">Y1</span></span>-<span class="mxinfo " id="T1:U113">1</span></span>)</span>).^2</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="91,208" id="srcline208">208</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,209" id="srcline209">209</a></span><span class="line">    [<span class="mxinfo " id="T56:U114"><span class="var type1" id="S55T56U501">dist_sort</span></span>, <span class="mxinfo " id="T56:U116"><span class="var type1" id="S56T56U502">bb1</span></span>]=sort(<span class="var type1" id="S46T56U505">dist</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="91,210" id="srcline210">210</a></span><span class="line">    <span class="keyword">if</span> <span class="mxinfo " id="T8:U119"><span class="mxinfo " id="T1:U120"><span class="var type1" id="S55T56U510">dist_sort</span>(<span class="mxinfo " id="T1:U122">1</span>)</span>==<span class="mxinfo " id="T1:U123"><span class="var type1" id="S55T56U513">dist_sort</span>(<span class="mxinfo " id="T1:U125">2</span>)</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="91,211" id="srcline211">211</a></span><span class="line">        <span class="mxinfo " id="T73:U126"><span class="var type1" id="S57T73U517">d</span>=<span class="mxinfo " id="T73:U128"><span class="mxinfo " id="T73:U129"><span class="mxinfo " id="T1:U130">2</span>*<span class="mxinfo " id="T73:U131"><span class="var type1" id="S48T76U522">Y</span>(<span class="mxinfo " id="T1:U133">1</span>,:)</span></span>-<span class="mxinfo " id="T1:U134">1</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="91,212" id="srcline212">212</a></span><span class="line">        <span class="mxinfo " id="T73:U135"><span class="var type1" id="S58T73U528">R1</span>=<span class="mxinfo " id="T73:U137"><span class="var type1" id="S39T1U530">beta</span>*<span class="var type1" id="S57T73U531">d</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="91,213" id="srcline213">213</a></span><span class="line">        <span class="comment">%R1=(sum(aa(1:num_competitor))+abs(R)-sqrt(dist_sort(1))).*d/4;</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,214" id="srcline214">214</a></span><span class="line">    <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,215" id="srcline215">215</a></span><span class="line">        <span class="mxinfo " id="T73:U140"><span class="var type1" id="S57T73U535">d</span>=<span class="mxinfo " id="T73:U142"><span class="mxinfo " id="T73:U143"><span class="mxinfo " id="T1:U144">2</span>*<span class="mxinfo " id="T73:U145"><span class="var type1" id="S48T76U540">Y</span>(<span class="mxinfo " id="T1:U147"><span class="var type1" id="S56T56U542">bb1</span>(<span class="mxinfo " id="T1:U149">1</span>)</span>,:)</span></span>-<span class="mxinfo " id="T1:U150">1</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="91,216" id="srcline216">216</a></span><span class="line">        <span class="mxinfo " id="T73:U151"><span class="var type1" id="S58T73U548">R1</span>=<span class="mxinfo " id="T73:U153"><span class="mxinfo " id="T73:U154">(<span class="mxinfo " id="T1:U155"><span class="mxinfo " id="T1:U156">sqrt(<span class="mxinfo " id="T1:U157"><span class="var type1" id="S55T56U556">dist_sort</span>(<span class="mxinfo " id="T1:U159">end</span>)</span>)</span>-<span class="mxinfo " id="T1:U160">sqrt(<span class="mxinfo " id="T1:U161"><span class="var type1" id="S55T56U562">dist_sort</span>(<span class="mxinfo " id="T1:U163">1</span>)</span>)</span></span>)*<span class="var type1" id="S57T73U564">d</span></span>/<span class="mxinfo " id="T1:U165">4</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="91,217" id="srcline217">217</a></span><span class="line">        <span class="comment">%R1=(dist_sort(2)-dist_sort(1))*d/4;</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,218" id="srcline218">218</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,219" id="srcline219">219</a></span><span class="line">    <span class="comment">%     else</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,220" id="srcline220">220</a></span><span class="line">    <span class="comment">%         d=2*Y-1;</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,221" id="srcline221">221</a></span><span class="line">    <span class="comment">%         R1=beta*d;</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,222" id="srcline222">222</a></span><span class="line"><span class="keyword">else</span><span class="comment">%no competitor mode</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,223" id="srcline223">223</a></span><span class="line">    <span class="var type0" id="S57T0U569">d</span>=2*<span class="var type0" id="S48T0U573">Y</span>-1;</span></span>
<span class="srcline"><span class="lineno"><a href="91,224" id="srcline224">224</a></span><span class="line">    <span class="var type0" id="S58T0U577">R1</span>=<span class="var type0" id="S39T0U579">beta</span>*<span class="var type0" id="S57T0U580">d</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="91,225" id="srcline225">225</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,226" id="srcline226">226</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="91,227" id="srcline227">227</a></span><span class="line"><span class="mxinfo " id="T73:U166"><span class="var type1" id="S61T73U583">W</span>=<span class="mxinfo " id="T73:U168"><span class="var type1" id="S58T73U585">R1</span>-<span class="var type1" id="S35T73U586">R</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="91,228" id="srcline228">228</a></span><span class="line"><span class="mxinfo " id="T73:U171"><span class="var type1" id="S35T73U589">R</span>=<span class="mxinfo " id="T73:U173"><span class="var type1" id="S35T73U591">R</span>+<span class="mxinfo " id="T73:U175"><span class="var type1" id="S38T1U593">alpha</span>*<span class="var type1" id="S61T73U594">W</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="91,229" id="srcline229">229</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="91,230" id="srcline230">230</a></span><span class="line"><span class="comment">%=======================</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,231" id="srcline231">231</a></span><span class="line"></span></span>
</pre>
